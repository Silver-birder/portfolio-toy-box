<!doctype html><html amp i-amphtml-layout i-amphtml-no-boilerplate transformed="self;v=1"><head><meta data-auto charset="utf-8"><style amp-runtime i-amphtml-version="012012232217000">html{overflow-x:hidden!important}html.i-amphtml-fie{height:100%!important;width:100%!important}html:not([amp4ads]),html:not([amp4ads]) body{height:auto!important}html:not([amp4ads]) body{margin:0!important}body{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}html.i-amphtml-singledoc.i-amphtml-embedded{-ms-touch-action:pan-y;touch-action:pan-y}html.i-amphtml-fie>body,html.i-amphtml-singledoc>body{overflow:visible!important}html.i-amphtml-fie:not(.i-amphtml-inabox)>body,html.i-amphtml-singledoc:not(.i-amphtml-inabox)>body{position:relative!important}html.i-amphtml-webview>body{overflow-x:hidden!important;overflow-y:visible!important;min-height:100vh!important}html.i-amphtml-ios-embed-legacy>body{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important}html.i-amphtml-ios-embed{overflow-y:auto!important;position:static}#i-amphtml-wrapper{overflow-x:hidden!important;overflow-y:auto!important;position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;margin:0!important;display:block!important}html.i-amphtml-ios-embed.i-amphtml-ios-overscroll,html.i-amphtml-ios-embed.i-amphtml-ios-overscroll>#i-amphtml-wrapper{-webkit-overflow-scrolling:touch!important}#i-amphtml-wrapper>body{position:relative!important;border-top:1px solid transparent!important}#i-amphtml-wrapper+body{visibility:visible}#i-amphtml-wrapper+body .i-amphtml-lightbox-element,#i-amphtml-wrapper+body[i-amphtml-lightbox]{visibility:hidden}#i-amphtml-wrapper+body[i-amphtml-lightbox] .i-amphtml-lightbox-element{visibility:visible}#i-amphtml-wrapper.i-amphtml-scroll-disabled,.i-amphtml-scroll-disabled{overflow-x:hidden!important;overflow-y:hidden!important}amp-instagram{padding:54px 0px 0px!important;background-color:#fff}amp-iframe iframe{box-sizing:border-box!important}[amp-access][amp-access-hide]{display:none}[subscriptions-dialog],body:not(.i-amphtml-subs-ready) [subscriptions-action],body:not(.i-amphtml-subs-ready) [subscriptions-section]{display:none!important}amp-experiment,amp-live-list>[update]{display:none}.i-amphtml-jank-meter{position:fixed;background-color:rgba(232,72,95,0.5);bottom:0;right:0;color:#fff;font-size:16px;z-index:1000;padding:5px}amp-list[resizable-children]>.i-amphtml-loading-container.amp-hidden{display:none!important}amp-list [fetch-error],amp-list[load-more] [load-more-button],amp-list[load-more] [load-more-end],amp-list[load-more] [load-more-failed],amp-list[load-more] [load-more-loading]{display:none}amp-list[diffable] div[role=list]{display:block}amp-story-page,amp-story[standalone]{min-height:1px!important;display:block!important;height:100%!important;margin:0!important;padding:0!important;overflow:hidden!important;width:100%!important}amp-story[standalone]{background-color:#202125!important;position:relative!important}amp-story-page{background-color:#757575}amp-story .amp-active>div,amp-story .i-amphtml-loader-background{display:none!important}amp-story-page:not(:first-of-type):not([distance]):not([active]){transform:translateY(1000vh)!important}amp-autocomplete{position:relative!important;display:inline-block!important}amp-autocomplete>input,amp-autocomplete>textarea{padding:0.5rem;border:1px solid rgba(0,0,0,0.33)}.i-amphtml-autocomplete-results,amp-autocomplete>input,amp-autocomplete>textarea{font-size:1rem;line-height:1.5rem}[amp-fx^=fly-in]{visibility:hidden}amp-script[nodom]{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}
/*# sourceURL=/css/ampdoc.css*/[hidden]{display:none!important}.i-amphtml-element{display:inline-block}.i-amphtml-blurry-placeholder{transition:opacity 0.3s cubic-bezier(0.0,0.0,0.2,1)!important;pointer-events:none}[layout=nodisplay]:not(.i-amphtml-element){display:none!important}.i-amphtml-layout-fixed,[layout=fixed][width][height]:not(.i-amphtml-layout-fixed){display:inline-block;position:relative}.i-amphtml-layout-responsive,[layout=responsive][width][height]:not(.i-amphtml-layout-responsive),[width][height][heights]:not([layout]):not(.i-amphtml-layout-responsive),[width][height][sizes]:not([layout]):not(.i-amphtml-layout-responsive){display:block;position:relative}.i-amphtml-layout-intrinsic,[layout=intrinsic][width][height]:not(.i-amphtml-layout-intrinsic){display:inline-block;position:relative;max-width:100%}.i-amphtml-layout-intrinsic .i-amphtml-sizer{max-width:100%}.i-amphtml-intrinsic-sizer{max-width:100%;display:block!important}.i-amphtml-layout-container,.i-amphtml-layout-fixed-height,[layout=container],[layout=fixed-height][height]:not(.i-amphtml-layout-fixed-height){display:block;position:relative}.i-amphtml-layout-fill,.i-amphtml-layout-fill.i-amphtml-notbuilt,[layout=fill]:not(.i-amphtml-layout-fill){display:block;overflow:hidden!important;position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-layout-flex-item,[layout=flex-item]:not(.i-amphtml-layout-flex-item){display:block;position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.i-amphtml-layout-fluid{position:relative}.i-amphtml-layout-size-defined{overflow:hidden!important}.i-amphtml-layout-awaiting-size{position:absolute!important;top:auto!important;bottom:auto!important}i-amphtml-sizer{display:block!important}@supports (aspect-ratio:1/1){i-amphtml-sizer.i-amphtml-disable-for-ar{display:none!important}}.i-amphtml-blurry-placeholder,.i-amphtml-fill-content{display:block;height:0;max-height:100%;max-width:100%;min-height:100%;min-width:100%;width:0;margin:auto}.i-amphtml-layout-size-defined .i-amphtml-fill-content{position:absolute;top:0;left:0;bottom:0;right:0}.i-amphtml-replaced-content,.i-amphtml-screen-reader{padding:0!important;border:none!important}.i-amphtml-screen-reader{position:fixed!important;top:0px!important;left:0px!important;width:4px!important;height:4px!important;opacity:0!important;overflow:hidden!important;margin:0!important;display:block!important;visibility:visible!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:8px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:12px!important}.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader~.i-amphtml-screen-reader{left:16px!important}.i-amphtml-unresolved{position:relative;overflow:hidden!important}.i-amphtml-select-disabled{-webkit-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.i-amphtml-notbuilt,[layout]:not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not([layout]):not(.i-amphtml-element){position:relative;overflow:hidden!important;color:transparent!important}.i-amphtml-notbuilt:not(.i-amphtml-layout-container)>*,[layout]:not([layout=container]):not(.i-amphtml-element)>*,[width][height][heights]:not([layout]):not(.i-amphtml-element)>*,[width][height][sizes]:not([layout]):not(.i-amphtml-element)>*{display:none}amp-img:not(.i-amphtml-element)[i-amphtml-ssr]>img.i-amphtml-fill-content{display:block}.i-amphtml-notbuilt:not(.i-amphtml-layout-container),[layout]:not([layout=container]):not(.i-amphtml-element),[width][height][heights]:not([layout]):not(.i-amphtml-element),[width][height][sizes]:not([layout]):not(.i-amphtml-element){color:transparent!important;line-height:0!important}.i-amphtml-ghost{visibility:hidden!important}.i-amphtml-element>[placeholder],[layout]:not(.i-amphtml-element)>[placeholder],[width][height][heights]:not([layout]):not(.i-amphtml-element)>[placeholder],[width][height][sizes]:not([layout]):not(.i-amphtml-element)>[placeholder]{display:block}.i-amphtml-element>[placeholder].amp-hidden,.i-amphtml-element>[placeholder].hidden{visibility:hidden}.i-amphtml-element:not(.amp-notsupported)>[fallback],.i-amphtml-layout-container>[placeholder].amp-hidden,.i-amphtml-layout-container>[placeholder].hidden{display:none}.i-amphtml-layout-size-defined>[fallback],.i-amphtml-layout-size-defined>[placeholder]{position:absolute!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1}.i-amphtml-notbuilt>[placeholder]{display:block!important}.i-amphtml-hidden-by-media-query{display:none!important}.i-amphtml-element-error{background:red!important;color:#fff!important;position:relative!important}.i-amphtml-element-error:before{content:attr(error-message)}i-amp-scroll-container,i-amphtml-scroll-container{position:absolute;top:0;left:0;right:0;bottom:0;display:block}i-amp-scroll-container.amp-active,i-amphtml-scroll-container.amp-active{overflow:auto;-webkit-overflow-scrolling:touch}.i-amphtml-loading-container{display:block!important;pointer-events:none;z-index:1}.i-amphtml-notbuilt>.i-amphtml-loading-container{display:block!important}.i-amphtml-loading-container.amp-hidden{visibility:hidden}.i-amphtml-element>[overflow]{cursor:pointer;position:relative;z-index:2;visibility:hidden;display:initial;line-height:normal}.i-amphtml-element>[overflow].amp-visible{visibility:visible}template{display:none!important}.amp-border-box,.amp-border-box *,.amp-border-box :after,.amp-border-box :before{box-sizing:border-box}amp-pixel{display:none!important}amp-analytics,amp-auto-ads,amp-story-auto-ads{position:fixed!important;top:0!important;width:1px!important;height:1px!important;overflow:hidden!important;visibility:hidden}html.i-amphtml-fie>amp-analytics{position:initial!important}[visible-when-invalid]:not(.visible),form [submit-error],form [submit-success],form [submitting]{display:none}amp-accordion{display:block!important}amp-accordion>section{float:none!important}amp-accordion>section>*{float:none!important;display:block!important;overflow:hidden!important;position:relative!important}amp-accordion,amp-accordion>section{margin:0}amp-accordion:not(.i-amphtml-built)>section>:last-child{display:none!important}amp-accordion:not(.i-amphtml-built)>section[expanded]>:last-child{display:block!important}
/*# sourceURL=/css/ampshared.css*/</style><meta data-auto name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><link rel="preload" href="https://cdn.ampproject.org/v0.js" as="script"><script data-auto async src="https://cdn.ampproject.org/v0.js"></script><link rel="preload" href="https://res.cloudinary.com/silverbirder/image/upload/v1588513402/micro-frontends-sample-code/micro_frontends_sample.jpg" as="image" data-hero><style amp-custom>.octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.anchor:focus{outline:0}h1 .octicon-link,h2 .octicon-link,h3 .octicon-link,h4 .octicon-link,h5 .octicon-link,h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}h1:hover .anchor,h2:hover .anchor,h3:hover .anchor,h4:hover .anchor,h5:hover .anchor,h6:hover .anchor{text-decoration:none}h1:hover .anchor .octicon-link,h2:hover .anchor .octicon-link,h3:hover .anchor .octicon-link,h4:hover .anchor .octicon-link,h5:hover .anchor .octicon-link,h6:hover .anchor .octicon-link{visibility:visible}h1:hover .anchor .octicon-link:before,h2:hover .anchor .octicon-link:before,h3:hover .anchor .octicon-link:before,h4:hover .anchor .octicon-link:before,h5:hover .anchor .octicon-link:before,h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'%3E%3C/path%3E%3C/svg%3E")}body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}details{display:block}summary{display:list-item}a{background-color:initial}a:active,a:hover{outline-width:0}strong{font-weight:inherit;font-weight:bolder}h1{margin:.67em 0}amp-img{border-style:none}code,kbd,pre{font-family:monospace,monospace;font-size:1em}hr{box-sizing:initial;overflow:visible}input{font:inherit;margin:0;overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}*{box-sizing:border-box}input{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#0366d6;text-decoration:none}a:hover{text-decoration:underline}strong{font-weight:600}hr{height:0;margin:15px 0;overflow:hidden;background:0 0;border-bottom:1px solid #dfe2e5}hr:after,hr:before{display:table;content:""}hr:after{clear:both}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}details summary{cursor:pointer}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:0}h1{font-size:32px}h1,h2{font-weight:600}h2{font-size:24px}h3{font-size:20px}h3,h4{font-weight:600}h4{font-size:16px}h5{font-size:14px}h5,h6{font-weight:600}h6{font-size:12px}p{margin-top:0;margin-bottom:10px}blockquote{margin:0}ol,ul{padding-left:0;margin-top:0;margin-bottom:0}ol ol,ul ol{list-style-type:lower-roman}ol ol ol,ol ul ol,ul ol ol,ul ul ol{list-style-type:lower-alpha}dd{margin-left:0}code,pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}pre{margin-top:0;margin-bottom:0}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}:checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.border{border:1px solid #e1e4e8}.border-0{border:0}.border-bottom{border-bottom:1px solid #e1e4e8}.rounded-1{border-radius:3px}.bg-white{background-color:#fff}.bg-gray-light{background-color:#fafbfc}.text-gray-light{color:#6a737d}.pl-3,.px-3{padding-left:16px}.px-3{padding-right:16px}.f6{font-size:12px}.lh-condensed{line-height:1.25}.text-bold{font-weight:600}.pl-c{color:#6a737d}.pl-c1,.pl-s .pl-v{color:#005cc5}.pl-e,.pl-en{color:#6f42c1}.pl-s .pl-s1,.pl-smi{color:#24292e}.pl-ent{color:#22863a}.pl-k{color:#d73a49}.pl-pds,.pl-s,.pl-s .pl-pse .pl-s1,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre{color:#032f62}.pl-smw,.pl-v{color:#e36209}.pl-bu{color:#b31d28}.pl-ii{color:#fafbfc;background-color:#b31d28}.pl-c2{color:#fafbfc;background-color:#d73a49}.pl-c2:before{content:"^M"}.pl-sr .pl-cce{font-weight:700;color:#22863a}.pl-ml{color:#735c0f}.pl-mh,.pl-mh .pl-en,.pl-ms{font-weight:700;color:#005cc5}.pl-mi{font-style:italic;color:#24292e}.pl-mb{font-weight:700;color:#24292e}.pl-md{color:#b31d28;background-color:#ffeef0}.pl-mi1{color:#22863a;background-color:#f0fff4}.pl-mc{color:#e36209;background-color:#ffebda}.pl-mi2{color:#f6f8fa;background-color:#005cc5}.pl-mdr{font-weight:700;color:#6f42c1}.pl-ba{color:#586069}.pl-sg{color:#959da5}.pl-corl{text-decoration:underline;color:#032f62}.mb-0{margin-bottom:0}.my-2{margin-bottom:8px;margin-top:8px}.pl-0{padding-left:0}.py-0{padding-top:0;padding-bottom:0}.pl-1{padding-left:4px}.pl-2{padding-left:8px}.py-2{padding-top:8px;padding-bottom:8px}.pl-3{padding-left:16px}.pl-4{padding-left:24px}.pl-5{padding-left:32px}.pl-6{padding-left:40px}.pl-7{padding-left:48px}.pl-8{padding-left:64px}.pl-9{padding-left:80px}.pl-10{padding-left:96px}.pl-11{padding-left:112px}.pl-12{padding-left:128px}hr{border-bottom-color:#eee}kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}body:after,body:before{display:table;content:""}body:after{clear:both}body>:first-child{margin-top:0}body>:last-child{margin-bottom:0}a:not([href]){color:inherit;text-decoration:none}blockquote,details,dl,ol,p,pre,table,ul{margin-top:0;margin-bottom:16px}hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}h1,h2,h3,h4,h5,h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}h1{font-size:2em}h1,h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}h2{font-size:1.5em}h3{font-size:1.25em}h4{font-size:1em}h5{font-size:.875em}h6{font-size:.85em;color:#6a737d}ol,ul{padding-left:2em}ol ol,ol ul,ul ol,ul ul{margin-top:0;margin-bottom:0}li{word-wrap:break-all}li>p{margin-top:16px}li+li{margin-top:.25em}dl,dl dt{padding:0}dl dt{margin-top:16px;font-size:1em;font-style:italic;font-weight:600}dl dd{padding:0 16px;margin-bottom:16px}table{display:block;width:100%;overflow:auto}table th{font-weight:600}table td,table th{padding:6px 13px;border:1px solid #dfe2e5}table tr{background-color:#fff;border-top:1px solid #c6cbd1}table tr:nth-child(2n){background-color:#f6f8fa}amp-img{max-width:100%;box-sizing:initial;background-color:#fff}amp-img[align=right]{padding-left:20px}amp-img[align=left]{padding-right:20px}code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}pre{word-wrap:normal}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.highlight{margin-bottom:16px}.highlight pre{margin-bottom:0;word-break:normal}.highlight pre,pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.blob-wrapper{overflow-x:auto;overflow-y:hidden}.blob-wrapper-embedded{max-height:240px;overflow-y:auto}.blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.blob-num:hover{color:rgba(27,31,35,.6)}.blob-num:before{content:attr(data-line-number)}.blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.pl-token.active,.pl-token:hover{cursor:pointer;background:#ffea7f}.tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.task-list-item{list-style-type:none}.task-list-item+.task-list-item{margin-top:3px}.task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}figure{margin:1em auto;text-align:center}figure figcaption{font-size:95%;opacity:.7;margin:0 auto 1.5em;text-align:center}figure figcaption a{text-decoration:underline}.hljs{display:block;overflow-x:auto;padding:.5em;background:#f0f0f0}.hljs,.hljs-subst{color:#444}.hljs-comment{color:#888}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta-keyword,.hljs-name,.hljs-selector-tag{font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#800}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#bc6060}.hljs-literal{color:#78a960}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta-string{color:#4d99bf}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><link data-auto rel="canonical" href="../../../ampOptimizer"></head><body><h1>ArchUnit</h1>
<p><amp-img src="https://res.cloudinary.com/silverbirder/image/upload/v1588513402/micro-frontends-sample-code/micro_frontends_sample.jpg" alt="hero-img" width="1381" height="723" layout="intrinsic" i-amphtml-ssr data-hero class="i-amphtml-layout-intrinsic i-amphtml-layout-size-defined" i-amphtml-layout="intrinsic"><i-amphtml-sizer class="i-amphtml-sizer"><img alt aria-hidden="true" class="i-amphtml-intrinsic-sizer" role="presentation" src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjcyMyIgd2lkdGg9IjEzODEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4xIi8+"></i-amphtml-sizer><img class="i-amphtml-fill-content i-amphtml-replaced-content" decoding="async" alt="hero-img" src="https://res.cloudinary.com/silverbirder/image/upload/v1588513402/micro-frontends-sample-code/micro_frontends_sample.jpg"></amp-img></p>
<p>[https://www.archunit.org/:embed:cite]</p>
<blockquote>
<p>ArchUnit is a free, simple and extensible library for checking the architecture of your Java code using any plain Java unit test framework. That is, ArchUnit can check dependencies between packages and classes, layers and slices, check for cyclic dependencies and more. It does so by analyzing given Java bytecode, importing all classes into a Java code structure.</p>
</blockquote>
<p>Javaのアーキテクチャをテストできるライブラリで、パッケージやクラス、レイヤー、スライス（？）の依存関係をテストできるそうです。
そこで、親の顔よりも見たこの図をテストしたいと思います。</p>
<p>[https://blog.cleancoder.com/uncle-bob/images/2012-08-13-the-clean-architecture/CleanArchitecture.jpg:image=https://blog.cleancoder.com/uncle-bob/images/2012-08-13-the-clean-architecture/CleanArchitecture.jpg]
※ [https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html]</p>
<h1>TypescriptでもArchUnitしたい</h1>
<p>ArchUnitはJava製です。私はTypescriptのArchUnitがしたいです。
そこで、良さげなライブラリを発見しました。</p>
<p>[https://github.com/MaibornWolff/ts-arch:embed:cite]</p>
<p>特に拘りなく、アーキテクチャのテストができれば何でも良いかなと思います。
極端な話、ソースコードをASTパースし、依存関係を抽出できれば自作できるんじゃないかと思います。</p>
<h1>試してみた</h1>
<p>試したソースコードは、下記に置いています。ご参考下さい。</p>
<p>[https://github.com/Silver-birder/try-archunit:embed:cite]</p>
<p>全体のソースコードツリーは次の構成です。</p>
<pre><code class="language-markdown">src
└ <span class="hljs-number">1_</span>enterprise_business_rules
  └ entities
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Entity</span>.</span></span>ts
└ <span class="hljs-number">2_</span>application_business_rules
  └ use_cases
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UseCase</span>.</span></span>ts
└ <span class="hljs-number">3_</span>interface_adapters
  └ controllers
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Controller</span>.</span></span>ts
  └ gateways
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Gateway</span>.</span></span>ts
  └ presenters
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Presenter</span>.</span></span>ts
└ <span class="hljs-number">4_</span>frameworks_and_drivers
  └ web
    └ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Web</span>.</span></span>ts
└ clean_architecture.puml
└ clean_architecture.test.ts
</code></pre>
<p>各プロダクトコードは、下の階層のファイルをimportしているだけとします。</p>
<pre><code class="language-javascript"><span class="hljs-comment">// src/4_frameworks_and_drivers/web/Web.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"../../3_interface_adapters/gateways/Gateway"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"../../3_interface_adapters/controllers/Controller"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"../../3_interface_adapters/presenters/Presenter"</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-regexp">//</span> src<span class="hljs-regexp">/3_interface_adapters/</span>controllers/Controller.ts
import <span class="hljs-string">"../../2_application_business_rules/use_cases/UseCase"</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-regexp">//</span> src<span class="hljs-regexp">/2_application_business_rules/u</span>se_cases/UseCase.ts
import <span class="hljs-string">"../../1_enterprise_business_rules/entities/Entity"</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-regexp">//</span> src<span class="hljs-regexp">/1_enterprise_business_rules/</span>entities/Entity.ts
</code></pre>
<p>下記ファイルにあるUMLのコンポーネント図で依存関係を表します。</p>
<pre><code class="language-markdown"><span class="hljs-comment"># clean_architecture.puml</span>
<span class="hljs-variable">@startuml</span>
  component [<span class="hljs-number">4_</span>frameworks_and_drivers] <span class="hljs-comment">#Blue</span>
  component [<span class="hljs-number">3_</span>interface_adapters] <span class="hljs-comment">#Green</span>
  component [<span class="hljs-number">2_</span>application_business_rules] <span class="hljs-comment">#Red</span>
  component [<span class="hljs-number">1_</span>enterprise_business_rules] <span class="hljs-comment">#Yellow</span>

  <span class="hljs-number">4_</span>frameworks_and_drivers --> <span class="hljs-number">3_</span>interface_adapters
  <span class="hljs-number">3_</span>interface_adapters --> <span class="hljs-number">2_</span>application_business_rules
  <span class="hljs-number">2_</span>application_business_rules --> <span class="hljs-number">1_</span>enterprise_business_rules
<span class="hljs-variable">@enduml</span>
</code></pre>
<p>UMLを可視化すると、下記の図のとおりです。</p>
<figure class="figure-image figure-image-fotolife" title="clean_architecture.puml">[f:id:silverbirder180:20201128114839p:plain]<figcaption>clean_architecture.puml</figcaption></figure>
<p>テストコードは、下記のとおりです。</p>
<pre><code class="language-javascript"><span class="hljs-comment">// clean_architecture.test.ts</span>
describe(<span class="hljs-string">"architecture"</span>,<span class="hljs-function"> <span class="hljs-params">()</span> =></span> {
    it(<span class="hljs-string">"Check dependency"</span>, async<span class="hljs-function"> <span class="hljs-params">()</span> =></span> {
        const architectureUml = path.resolve(__dirname, <span class="hljs-string">"clean_architecture.puml"</span>);
        const violations = await slices<span class="hljs-constructor">OfProject()</span>
            .defined<span class="hljs-constructor">By(<span class="hljs-string">"src/(**)/"</span>)</span>
            .should<span class="hljs-literal">()</span>
            .adhere<span class="hljs-constructor">ToDiagramInFile(<span class="hljs-params">architectureUml</span>)</span>
            .check<span class="hljs-literal">()</span>;
        await expect(violations).<span class="hljs-keyword">to</span><span class="hljs-constructor">Equal([])</span>
    });
});
</code></pre>
<p>このテストケースはPASSします。</p>
<figure class="figure-image figure-image-fotolife" title="src/clean_architecture.test.ts > architecture > Check dependency #Succeed">[f:id:silverbirder180:20201128115326p:plain]<figcaption>src/clean_architecture.test.ts > architecture > Check dependency #Succeed</figcaption></figure>
<p>では、違反コードを書いてみます。</p>
<pre><code class="language-javascript"><span class="hljs-comment">// src/3_interface_adapters/controllers/Controller.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"../../2_application_business_rules/use_cases/UseCase"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"../../4_frameworks_and_drivers/web/Web"</span>
</code></pre>
<p>3レイヤーが上位の4レイヤーを使用しています。この状態でテストを実行すると、</p>
<figure class="figure-image figure-image-fotolife" title="src/clean_architecture.test.ts > architecture > Check dependency #Failed">[f:id:silverbirder180:20201128115543p:plain]<figcaption>src/clean_architecture.test.ts > architecture > Check dependency #Failed</figcaption></figure>
<p>見事Failedとなりました。つまり、依存関係の誤りを自動的に検出することができます。</p>
<h1>最後に</h1>
<p>規模が大きなプロジェクトほど、依存関係が複雑になりがちです。(Javaでいう) パッケージやクラスの依存関係を適切に設計できていたとしても、誰かが壊しかねません。せっかく設計したのに壊されるのは、とても残念なので、テストコードで守ってあげましょう！</p></body></html>
